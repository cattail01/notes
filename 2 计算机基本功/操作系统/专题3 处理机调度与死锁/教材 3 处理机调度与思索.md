[toc]

### 第3章 处理机调度与死锁（重要）

#### 3.1 处理机调度层次和调度算法目标

##### 1. [处理机调度的层次](教材 处理机调度的层次.md)

* 高级调度（作用对象，功能）
* ==低级调度==（作用对象，功能）
* 中级调度（作用对象，功能）

##### 2. 处理机调度算法的目标

* 处理机调度算法的共同目标（**CPU利用率计算公式**）
* 批处理系统的目标（**周转时间，带权周转时间公式**）
* 分时系统的目标、实时系统的目标

#### 3.2 [作业与作业调度](教材 作业调度算法.md)

* 功能：将任务从外存调入内存

##### 1 批处理系统的作业

* 作业（job）和作业步
* 作业控制块（jcb）
* 作业运行的三个阶段和三种状态

##### 2. 先来先服务（FCFS）和短作业优先（SJF）调度算法

* 先来先服务算法（原理，实现方式）
* 短作业优先（short job first）调度算法（原理，实现方式）

##### 3. 优先级调度算法和高相应比优先调度算法

* 优先级调度算法（PSA）
* **高相应比优先调度算法（HRRN）**
  * 原理、实现方式
  * **优先权（或者Rp）计算公式**

#### [3.3 进程调度](教材 进程调度方式.md)

* 功能：将内存中的进程调入处理机运行

##### 1. 进程调度任务、机制和方式

* 进程调度任务（保存现场信息、选择进程、分配处理器）
* 进程调度机制（排队器、分派器、上下文切换器）
* **进程调度方式**（非抢占方式、抢占方式）

##### 2. 轮转（RR）调度算法

* 基本原理：像左轮手枪一样，每个时间片打一发，打完重新开始打

##### 3. 优先级调度算法

* 优先级调度算法类型（非抢占式/抢占式调度算法调度算法）
* 优先级的类型（静态优先级、动态优先级）

##### 4. 多级反馈队列调度算法（难点）

* 调度机制
  * 设置多个就绪队列， 优先级低的队列时间片高
  * fcfs算法，最后一个队列采用RR算法
  * 新任务运行的时间取决于fcfs算法
  * 一个队列未完成的任务，会转移到下一个队列的末尾继续执行

#### 3.4 [实时调度](教材 实时调度算法.md)

* 对象：实时系统

##### 1. 实现实时调度的基本条件

* 提供关于实时调度的基本信息、系统处理能力强、采用抢占式调度、具有快速切换机制

##### 2. 实时调度算法的分类

* 非抢占式调度算法（非抢占式轮转，非抢占式优先调度算法）
* 抢占调度算法（基于时钟中断的抢占式调度、立即抢占的优先级调度算法）

##### 3. 最早截止时间优先（EDF）算法

* 分类：非抢占式/抢占式

##### 4. 最低松弛度优先算法（重要）

* 松弛度计算公式（必须完成的时间 - 本身运行的时间 - 当前时间）

##### 5. 优先级倒置

* 形成与解决方法

#### 3.5 死锁概述

##### 1. 资源问题

* 可重用性资源和消耗资源
* 可抢占性资源与不可抢占资源

##### 2. 计算机系统中的死锁

* 竞争不可抢占性资源引起的死锁
* 竞争可消耗资源引起的死锁
* 进程推进顺序不当引起的死锁

##### 3. ==死锁的定义、必要条件及处理方法==

* 死锁的定义
* 产生死锁的必要条件（互斥条件、请求和保持条件、不可抢占条件、循环等待条件）
* 处理死锁的方法（预防-破坏条件，避免-安全状态，检测，解除）

#### 3.6 预防死锁

##### 1. 破坏“请求和保持”条件

* 一次性全部申请/分阶段申请和释放

##### 2. 破坏“不可抢占”条件

* 如果新资源不能满足，必须释放所有已经申请的资源

##### 3. 破坏“循环等待”条件

* 设置资源申请的顺序

#### ==[3.7 避免死锁](教材 避免死锁的方法.md)==

* 资源动态分配，防止系统进入不安全状态

##### 1. 系统安全状态

* 安全状态（定义，非安全状态后果）
* 安全序列（定义，查找方法）

##### 2. 利用银行家算法避免死锁

* 原理：进程申请资源时检查是否能进入不安全状态
* 数据结构：可利用资源向量available、最大需求矩阵max、分配矩阵allocation、需求矩阵need
* 银行家算法过程：检查需求是否大于宣布的最大值、检查需求是否大于可用的值、尝试着分配资源（在矩阵中推算）、执行安全性算法，如果成功则给资源，如果不成功则拒绝，同时将矩阵中的值改回

#### 3.8 死锁的检测和解除

##### 1. 死锁的检测

* ==资源分配图==（圆圈：进程，申请箭头，占有箭头，资源）
* 死锁定理（在资源分配图中，找能运行的部分，让其运行完并释放资源，然后重复，如果最后全部变成独立的圆圈说明不是死锁）

##### 2. 死锁的解除

* 终止所有死锁进程
* 逐个终止进程（代价最小）

### 进程调度题目

### 银行家算法题目

