### I/O控制方式

* I/O控制方式即采用什么方式来**控制外设与CPU进行信息传递**。
* 根据发展的历史顺序先后，I/O控制方式可分为**程序I/O方式**、**中断方式**、**DMA控制方式**和**通道方式**四种。
* I/O控制方式发展的宗旨：减少CPU对I/O控制的干预，把CPU从繁杂的I/O操作中解脱出来，使CPU有更多的时间计算。

#### 轮询的可编程I/O方式（循环测试）

* 又称为忙-等方式，即在CPU向控制器发出一条I/O指令启动输入设备输入数据时，要同时把状态寄存器中的忙/闲标志busy置1，然后不断地循环测试busy。
* Busy=1表示输入机尚未输完一个字符，直到=0，表明输入机已将输入数据送入控制器的数据寄存器中。
* CPU和外设是串行处理过程

#### 中断的可编程I/O方式

* 引入中断机构
* 当某进程要启动某个I/O设备工作时，先由CPU向相应的设备控制器发出一条I/O指令，然后CPU立即返回继续执行原来的任务。
* 设备控制器按照该命令的要求去控制指定I/O设备，CPU可与I/O设备并部分行操作。
* 只有当正常或异常结束时才向CPU发出中断

#### 直接存储器访问（DMA） I/O方式

* DMA直接存储器访问
* DMA控制方式的引入：中断方式是以字（节）为单位进行I/O的，即每完成一个字（节）的I/O时，控制器便要向CPU请求一次中断。
* DMA控制器的组成：**主机与DMA的接口、DMA控制器与块设备的接口、I/O控制逻辑**，如图6-14所示。

##### DMA控制器中设置四类寄存器：

* **命令/状态寄存器(CR)**：接收CPU发来的I/O命令，或者控制信息，或设备的状态信息。
* **内存地址寄存器（MAR)**：输入时，存放把数据从设备传送到内存的起始地址；输出时，他存放数据在内存的源地址。
* **数据寄存器(DR)**：暂存数据
* **数据计数器(DC)**：CPU要读或写的字节数。

##### DMA控制方式的特点

* 数据传输的**基本单位**是**数据块**
* 传送的数据是从**设备直接送入内存**
* 仅在传送数据块的**开始和结束时向CPU发出中断**。

#### I/O通道控制方式

* 以内存为中心，实现设备与内存数据的直接交换。
* 与DMA控制方式不同的是：在DMA方式方式中数据的传输方向，大小，内存地址都由CPU控制。I/O通道控制方式传输的单位是一组数据块，可实现CPU、通道、I/O设备三者并行操作，进一步减轻了CPU的负担，提高了并行度。

