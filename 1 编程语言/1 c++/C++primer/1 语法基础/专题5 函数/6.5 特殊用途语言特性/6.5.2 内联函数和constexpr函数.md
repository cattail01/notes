#### 6.5.2 内联函数和constexpr函数

#### 普通函数相比表达式的优点和缺陷

##### 优点：

* 易于读懂
* 确保行为统一
* 修改管理容易

##### 缺点

* 函数调用一般比求等价表达式的值要慢

  函数调用工作：调用前保存寄存器，并在返回时恢复；可能需要拷贝实参；程序转向一个新位置继续运行

#### 内联函数可避免函数调用开销

* 内联函数：使函数在调用点上展开
* 声明定义：在返回类型之前加上inline
* 作用：用于优化规模较小、流程直接、频繁调用的函数
* 注意：可能不支持内联递归函数，函数体积应当尽量小

#### constexpr函数

* constexpr函数：能用于常量表达式的函数
* 返回值类型和所有形参的类型都得是字面值类型
* 只能有一条return语句
* 同样作为替换函数，constexpr函数是一个inline函数
* 允许constexpr返回值非常量，但是参数必须是常量

#### 内联函数和constexpr函数放在头文件内

* 内联函数和constexpr作用域仅在文件内
* 在文件外需要被多次定义
* 为了避免麻烦，可以在头文件中包含内联函数的constexpr函数的定义



